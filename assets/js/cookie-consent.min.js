(function(){'use strict';const CONSENT_KEY='cookieConsent';const CONSENT_TIMESTAMP_KEY='cookieConsentTimestamp';const CONSENT_EXPIRY_DAYS=365;const banner=document.getElementById('cookie-banner');const acceptButton=document.getElementById('cookie-accept');const declineButton=document.getElementById('cookie-decline');if(!banner||!acceptButton||!declineButton){console.error('Cookie banner elements not found');return;}
function isConsentValid(){const timestamp=localStorage.getItem(CONSENT_TIMESTAMP_KEY);if(!timestamp)return false;const consentDate=new Date(parseInt(timestamp));const now=new Date();const daysSinceConsent=(now-consentDate)/(1000*60*60*24);return daysSinceConsent<CONSENT_EXPIRY_DAYS;}
function shouldShowBanner(){const consent=localStorage.getItem(CONSENT_KEY);if(!consent||!isConsentValid()){return true;}
return false;}
function showBanner(){banner.classList.add('is-visible');banner.setAttribute('aria-hidden','false');}
function hideBanner(){banner.classList.remove('is-visible');banner.setAttribute('aria-hidden','true');}
function saveConsent(accepted){const choice=accepted?'accepted':'declined';localStorage.setItem(CONSENT_KEY,choice);localStorage.setItem(CONSENT_TIMESTAMP_KEY,Date.now().toString());const event=new CustomEvent('consentChanged',{detail:{consent:choice}});window.dispatchEvent(event);console.log('Cookie consent:',choice);}
function handleAccept(){saveConsent(true);hideBanner();setTimeout(()=>{window.location.reload();},300);}
function handleDecline(){saveConsent(false);hideBanner();}
function init(){if(shouldShowBanner()){setTimeout(showBanner,1000);}
acceptButton.addEventListener('click',handleAccept);declineButton.addEventListener('click',handleDecline);banner.addEventListener('keydown',function(e){if(e.key==='Escape'){handleDecline();}});}
if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}
window.cookieConsent={get:()=>localStorage.getItem(CONSENT_KEY),reset:()=>{localStorage.removeItem(CONSENT_KEY);localStorage.removeItem(CONSENT_TIMESTAMP_KEY);window.location.reload();},show:showBanner};})();